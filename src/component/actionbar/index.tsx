// This is a skeleton starter React component generated by Plasmic.
// This file is owned by you, feel free to edit as you see fit.
import * as React from "react";
import {
  PlasmicActionBar,
  DefaultActionBarProps,
} from "component/plasmic/shared/PlasmicActionBar";
import ComposeEditor from "component/editor/compose";
import CircularProgress from "@material-ui/core/CircularProgress";
import { EditorShape } from "component/editor/compose";

interface ActionBarProps extends DefaultActionBarProps {
  errorMessage: string;
  progress: number;
  editorShape: EditorShape;
  setEditorShape: React.Dispatch<React.SetStateAction<EditorShape>>;
}

function ActionBar(props: ActionBarProps) {
  const { errorMessage, progress, editorShape, setEditorShape } = props;
  const MIN = 0;
  const MAX = 240;
  const normalize = (value: number) => ((value - MIN) * 100) / (MAX - MIN);

  return (
    <PlasmicActionBar
      error={errorMessage ? "hasError" : undefined}
      text={normalize(progress) > 0 ? "hasText" : undefined}
      errorMessage={errorMessage}
      progressContainer={{
        render: () => (
          <CircularProgress variant="determinate" value={normalize(progress)} />
        ),
      }}
      textContainer={{
        render: () => (
          <ComposeEditor
            editorShape={editorShape}
            setEditorShape={setEditorShape}
          />
        ),
      }}
    />
  );
}

export default ActionBar;
