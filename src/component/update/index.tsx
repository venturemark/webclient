// This is a skeleton starter React component generated by Plasmic.
// This file is owned by you, feel free to edit as you see fit.
import React from "react";
import {
  PlasmicUpdate,
  DefaultUpdateProps,
} from "component/plasmic/shared/PlasmicUpdate";
import { Node } from "slate";
import * as linechart from "component/linechart";

export interface UpdateType {
  id: string;
  text: Node[];
  numberValue: number;
  flipped: boolean;
}

interface UpdateProps extends DefaultUpdateProps {
  text: Node[];
  dataKey: string;
  data: linechart.DataItem[];
  name: string;
  flipped: boolean;
  updates: UpdateType[];
  setUpdates: React.Dispatch<React.SetStateAction<UpdateType[]>>;
  id: string;
}

function Update(props: UpdateProps) {
  const { text, dataKey, data, name, flipped, updates, setUpdates, id } = props;

  return (
    <PlasmicUpdate
      toggleUpdateView={{
        "aria-label": "Toggle View",
        onPress: () => {
          const unflippedUpdates = updates.map((update) => {
            const flipped = id === update.id ? !update.flipped : false;
            return { ...update, flipped };
          });
          setUpdates(unflippedUpdates);
        },
      }}
      updateContent={{
        isFlipped: flipped,
        text: text,
        name: name,
        dataKey: dataKey,
        data: data,
      }}
    />
  );
}

export default Update;
