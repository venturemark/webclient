// This is a skeleton starter React component generated by Plasmic.
// This file is owned by you, feel free to edit as you see fit.
import React from "react";
import ReactCardFlip from "react-card-flip";
import {
  PlasmicUpdateContent,
  DefaultUpdateContentProps,
} from "component/plasmic/shared/PlasmicUpdateContent";
import ReadEditor from "component/editor/read";
import { Node } from "slate";
import { IMetric } from "module/interface/metric";

interface UpdateContentProps extends DefaultUpdateContentProps {
  isFlipped: boolean;
  text: Node[];
  dataKey: string;
  data: IMetric[];
  name: string;
  changeContext: any;
}

function UpdateContent(props: UpdateContentProps) {
  const { isFlipped, text, data, dataKey, name, changeContext } = props;

  const handleChangeContext = (
    e: any,
    payload: React.MouseEvent<HTMLInputElement>
  ) => {
    const updateId = e.payload.updateId;
    changeContext(updateId);
  };

  return (
    <ReactCardFlip isFlipped={isFlipped} flipDirection="vertical">
      <PlasmicUpdateContent
        state="text"
        textContainer={{
          render: () => <ReadEditor text={text} />,
        }}
      />
      <PlasmicUpdateContent
        state="graph"
        metric={{
          name: name,
          dataKey: dataKey,
          data: data,
          handleChangeContext: handleChangeContext,
        }}
      />
    </ReactCardFlip>
  );
}

export default UpdateContent;
